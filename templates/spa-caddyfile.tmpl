# Caddyfile generated by MP3
# https://github.com/JonasGruenwald/mp3

{{if .RedirectWWW}}
# Redirect www to root domain
# Reference: https://caddyserver.com/docs/caddyfile/patterns#redirect-www-subdomain
www.{{ .Domain }} {
	redir {{ .Domain }}{uri}
}

{{end}}
# Single Page Application (MP3 connect)
# Reference: https://caddyserver.com/docs/caddyfile/patterns#single-page-apps-spas
{{ .Domain }} {
	root * {{ .StaticPath }}
	encode gzip
	try_files {path} /index.html
	file_server
}
